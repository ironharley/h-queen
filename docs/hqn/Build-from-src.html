<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for Harlequeen geodata server (eq hqn) (version 1.0, 31 December 2017).

Copyright (C) 2016 Harley Kooper

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, with no Front-Cover Texts,
and with no Back-Cover Texts.  A copy of the license is included in
the section entitled "GNU Free Documentation License".
 -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Build from src (Harlequeen geodata server)</title>

<meta name="description" content="Build from src (Harlequeen geodata server)">
<meta name="keywords" content="Build from src (Harlequeen geodata server)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Installation.html" rel="up" title="Installation">
<link href="Properley-installation.html" rel="next" title="Properley installation">
<link href="Requirements.html" rel="prev" title="Requirements">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="Build-from-src"></span><div class="header">
<p>
Next: <a href="Properley-installation.html" accesskey="n" rel="next">Properley installation</a>, Previous: <a href="Requirements.html" accesskey="p" rel="prev">Requirements</a>, Up: <a href="Installation.html" accesskey="u" rel="up">Installation</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Build-from-src-1"></span><h3 class="section">3.2 Build from src</h3>
<span id="index-Build-from-src"></span>
<p>Preffered directory structure (cloned from git must be the same):
</p><div class="example">
<pre class="example">   BUILD_ROOT  
             ...
             .gitmodules
             ...
             harlequind          <kbd>- hqn here</kbd>,
                        ...
                        client -&gt;   <kbd>- client sources (and binaries wiil here)</kbd>
                        daemon -&gt;   <kbd>- server sources (and binaries wiil here)</kbd>
                        docs/hqn -&gt; <kbd>- this text</kbd>
                        ...
             libtecla
             rabbitmq-c     <kbd>- subrepo, link to clone inside .gitmodules</kbd>
             tools          <kbd>- some prebuilt libraries and headers</kbd>
                  ...
                  include-&gt;  <kbd>headers of prebuilt software </kbd>
                  lib -&gt;     <kbd>some prebuilt 32b-libraries </kbd>
                  lib64 -&gt;   <kbd>some prebuilt 64b-libraries </kbd>
                  ...
</pre></div>
<p>BUILD_ROOT has to change to real path. Inside the BUILD_ROOT exists <code>autogen.sh</code> and  <code>configure</code> script. You can use last with a special keys:
</p><ol>
<li> If you want use full-featured build (<b>with</b> RabbitMQ)
<div class="example">
<pre class="example">configure ... --enable-postgresql
</pre></div>
</li><li> If you want use full-featured <b>without</b> RabbitMQ
<div class="example">
<pre class="example">configure ... --enable-postgresql --disable-rabbitmq
</pre></div>
</li><li> If you want use &quot;fork-type&quot; build (<b>without both</b> Postgresql and RabbitMQ)
<div class="example">
<pre class="example">configure ... 
</pre></div>
</li></ol>
<p>Other <code>configure</code> opthions (<code>--prefix</code> ant so on) are normal.
</p>
<p>Next steps:
</p><ol>
<li> Now go to <code>BUILD_ROOT/harlequind</code> and make it:
	<div class="example">
<pre class="example">	./autogen
	make &amp;&amp; sudo make install
	</pre></div>
<p>If you won&rsquo;t use  <code>autogen.sh</code>, lose this point and go further.
</p>
</li><li> build &amp;&amp; install POCO into /usr by:
<div class="example">
<pre class="example">	cd $POCO
	./configure --prefix=/usr --omit=Data/MySQL,Data/ODBC --shared
	./make -j4 &amp;&amp; make install
</pre></div>
	
</li><li> <code>export PREFIX=BUILD_ROOT/tools</code> 

</li><li> If w/o  <code>autogen.sh </code> build &amp;&amp; install libtecla (cd inside of BUILD_ROOT/libtecla and run):
<div class="example">
<pre class="example">	./configure --prefix=$PREFIX
	make &amp;&amp; make install
</pre></div>
	
</li><li> Install <code>libgcrypt</code> w/ devel by pkg manager 
</li><li> If <b>with</b> Postgresql you need libpqxx by (<code>wget</code> from <a href="http://www.andromeda.nl/UNIX/packages/">http://www.andromeda.nl/UNIX/packages/</a> 
	or <a href="http://pqxx.org/development/libpqxx/">http://pqxx.org/development/libpqxx/</a>) manually.	
	<b>NOTE</b>: check your Postgresql installation:  <code>/usr/lib/libpq.so/a</code> has to exists, else do something this:
	<div class="example">
<pre class="example">	sudo ln -s /usr/pgsql-9.5/lib/libpq.so.5 /usr/lib/libpq.so
	</pre></div>
<p>Your installation can hasn&rsquo;t <code>so.5</code>, but has any another - it doesn&rsquo;t matter. The sames about static (.a) library.
</p>	
</li><li> If w/o  <code>autogen.sh </code> now go to <code>BUILD_ROOT/harlequind</code> and make it:
	<div class="example">
<pre class="example">	make &amp;&amp; sudo make install
	</pre></div>

</li></ol>


<hr>
<div class="header">
<p>
Next: <a href="Properley-installation.html" accesskey="n" rel="next">Properley installation</a>, Previous: <a href="Requirements.html" accesskey="p" rel="prev">Requirements</a>, Up: <a href="Installation.html" accesskey="u" rel="up">Installation</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
